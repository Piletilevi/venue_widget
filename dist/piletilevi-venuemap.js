!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var o=(l=i,s=btoa(unescape(encodeURIComponent(JSON.stringify(l)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(r," */")),a=i.sources.map((function(e){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(e," */")}));return[n].concat(a).concat([o]).join("\n")}var l,s,r;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,i){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var s=0;s<e.length;s++){var r=[].concat(e[s]);i&&o[r[0]]||(n&&(r[2]?r[2]="".concat(n," and ").concat(r[2]):r[2]=n),t.push(r))}},t}},function(e,t,n){e.exports=n(5)},function(e,t,n){var i=n(3),o=n(4);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1};i(o,a);e.exports=o.locals||{}},function(e,t,n){"use strict";var i,o=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},a=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),l=[];function s(e){for(var t=-1,n=0;n<l.length;n++)if(l[n].identifier===e){t=n;break}return t}function r(e,t){for(var n={},i=[],o=0;o<e.length;o++){var a=e[o],r=t.base?a[0]+t.base:a[0],c=n[r]||0,d="".concat(r," ").concat(c);n[r]=c+1;var p=s(d),u={css:a[1],media:a[2],sourceMap:a[3]};-1!==p?(l[p].references++,l[p].updater(u)):l.push({identifier:d,updater:v(u,t),references:1}),i.push(d)}return i}function c(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var o=n.nc;o&&(i.nonce=o)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var l=a(e.insert||"head");if(!l)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");l.appendChild(t)}return t}var d,p=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function u(e,t,n,i){var o=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=p(t,o);else{var a=document.createTextNode(o),l=e.childNodes;l[t]&&e.removeChild(l[t]),l.length?e.insertBefore(a,l[t]):e.appendChild(a)}}function f(e,t,n){var i=n.css,o=n.media,a=n.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),a&&btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var h=null,m=0;function v(e,t){var n,i,o;if(t.singleton){var a=m++;n=h||(h=c(t)),i=u.bind(null,n,a,!1),o=u.bind(null,n,a,!0)}else n=c(t),i=f.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=o());var n=r(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var o=s(n[i]);l[o].references--}for(var a=r(e,t),c=0;c<n.length;c++){var d=s(n[c]);0===l[d].references&&(l[d].updater(),l.splice(d,1))}n=a}}}},function(e,t,n){"use strict";n.r(t);var i=n(0),o=n.n(i)()(!1);o.push([e.i,".piletilevi_venue_map {\n    position: relative;\n}\n\n.piletilevi_venue_map_sections > svg {\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    max-width: 100%;\n    max-height: 100%;\n}\n\n.piletilevi_venuemap_selection_rectangle {\n    background: rgba(10, 45, 237, 0.08);\n    border: 1px solid rgba(10, 45, 237, 0.2);\n    box-sizing: border-box;\n}\n\n.piletilevi_venue_map .place_detail {\n    display: none;\n}\n\n.piletilevi_venue_map .with_seat_numbers .place_detail {\n    display: inline;\n}\n\n.piletilevi_venue_map .section_label {\n    display: none;\n    text-shadow: 1px 1px #ffffff;\n    pointer-events: none;\n}\n\n.piletilevi_venue_map .with_section_labels .section_label {\n    display: inline;\n}\n\n.piletilevi_venue_map_canvas {\n    display: block;\n    text-align: center;\n    white-space: nowrap;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n}\n\n.piletilevi_venue_map_canvas .place {\n    cursor: pointer;\n}\n\n.piletilevi_venue_map_places_main {\n    min-height: 180px;\n    min-width: 100%;\n}\n\n.piletilevi_venue_map_places_with_controls .piletilevi_venue_map_canvas {\n    padding-left: 39px;\n    padding-right: 39px;\n}\n\n.piletilevi_venue_map_canvas svg {\n    display: inline;\n    vertical-align: top;\n}\n\n.piletilevi_venue_map_controls {\n    position: absolute;\n    right: 3px;\n    bottom: 30px;\n    box-shadow: 0 0 3px #c5c5c5;\n}\n\n.piletilevi_venue_map_control {\n    font-family: Arial, sans-serif;\n    font-size: 27px;\n    width: 30px;\n    height: 30px;\n    border: 0;\n    border-top: 1px solid #e6e6e6;\n    padding: 0;\n    outline: none;\n    display: block;\n    line-height: 0;\n    font-weight: bold;\n    background: #ffffff;\n    color: #c5c5c5;\n    text-align: center;\n    overflow: hidden;\n}\n\n.piletilevi_venue_map_control.piletilevi_venue_map_control_active {\n    color: #000000;\n    cursor: pointer;\n}\n\n.piletilevi_venue_map_control:first-child {\n    border-top: 0;\n}\n\n.piletilevi_venue_map_control:before {\n    display: inline-block;\n    content: '';\n    height: 100%;\n    width: 1px;\n    margin-left: -1px;\n    vertical-align: middle;\n}\n\n.piletilevi_venue_map_control:after {\n    display: inline-block;\n    content: '';\n    vertical-align: middle;\n}\n\n.piletilevi_venue_map_control_extend:after {\n    height: 10px;\n    width: 14px;\n    border: 2px solid #c5c5c5;\n}\n\n.piletilevi_venue_map_control_extend.piletilevi_venue_map_control_active:after {\n    border-color: #000000;\n}\n\n.piletilevi_venue_map_extended .piletilevi_venue_map_control_extend:after {\n    height: 5px;\n}\n\n.piletilevi_venue_map_control_zoomin:after {\n    content: '+';\n}\n\n.piletilevi_venue_map_control_zoomout:after {\n    content: '-';\n}\n\n.piletilevi_venue_map_control_resetzoom:after {\n    content: 'Ã—';\n}\n\n.places_map_legend {\n    padding-bottom: 1.5em;\n    margin: -0.15em;\n}\n\n.piletilevi_venue_map_places_with_map .places_map_legend {\n    width: 70%;\n}\n\n.places_map_legend_item {\n    min-width: 5.95em;\n    box-sizing: border-box;\n    color: #000000;\n    display: inline-block;\n    vertical-align: top;\n    text-align: left;\n    padding: 0 0.5em;\n    position: relative;\n    overflow: hidden;\n    margin: 0.15em 0.15em 0.43em;\n    white-space: nowrap;\n    font-weight: bold;\n}\n\n.places_map_legend_title {\n    display: inline-block;\n    white-space: nowrap;\n    position: relative;\n    font-size: 0.93em;\n    line-height: 1.5em;\n    vertical-align: middle;\n}\n\n.places_map_legend_suffix {\n    font-size: 0.93em;\n    line-height: 1.5em;\n    vertical-align: middle;\n    color: #9a9a9a;\n    margin-left: 0.25em;\n}\n\n.places_map_legend_color {\n    display: inline-block;\n    width: 0.93em;\n    height: 0.93em;\n    margin-right: 0.4em;\n    border-radius: 999px;\n    vertical-align: middle;\n}\n\n.place_tooltip {\n    display: none;\n    z-index: 100;\n    padding-bottom: 10px;\n    position: absolute;\n    max-width: 50%;\n}\n\n.place_tooltip_content {\n    position: relative;\n    font-size: 0.92em;\n    padding: 0.6em;\n    background: #ffffff;\n    -webkit-box-shadow: 0.25em 0.25em 0.5em rgba(0, 0, 0, 0.2);\n    -moz-box-shadow: 0.25em 0.25em 0.5em rgba(0, 0, 0, 0.2);\n    box-shadow: 0.25em 0.25em 0.5em rgba(0, 0, 0, 0.2);\n}\n\n.place_tooltip_content td {\n    padding: 3px 4px;\n}\n\n.place_tooltip table,\n.place_tooltip table tr {\n    display: block;\n}\n\n.place_tooltip:before {\n    /* shadow effect for triangle */\n    content: \"\";\n    height: 5px;\n    left: 50%;\n    margin-left: -5px;\n    position: absolute;\n    bottom: 0;\n    width: 10px;\n    -moz-box-shadow: 0 6px 5px rgba(0, 0, 0, 0.13);\n    -webkit-box-shadow: 0 6px 5px rgba(0, 0, 0, 0.13);\n    box-shadow: 0 6px 5px rgba(0, 0, 0, 0.13);\n}\n\n.place_tooltip:after {\n    /* bottom triangle */\n    content: \"\";\n    position: absolute;\n    bottom: 0;\n    left: 50%;\n    margin-left: -10px;\n    border-top: 10px solid #ffffff;\n    border-left: 10px solid transparent;\n    border-right: 10px solid transparent;\n}\n\n.place_tooltip_label {\n    display: inline;\n}\n\n.place_tooltip_value {\n    display: inline;\n    font-weight: bold;\n}\n\n.place_tooltip_status {\n    display: block;\n    font-weight: bold;\n    padding-top: 0.4em;\n}\n\n[data-draggable-state='draggable'] {\n    cursor: grab;\n}\n\n[data-draggable-state='dragging'] {\n    cursor: grabbing;\n}\n\n.piletilevi_venue_map_places {\n    display: flex;\n    flex-wrap: wrap;\n}\n\n.places_map_sections_thumbnail {\n    width: 30%;\n    max-height: 15em;\n    position: relative;\n}\n\n.piletilevi_venue_map_places:not(.piletilevi_venue_map_places_with_map) .places_map_sections_thumbnail {\n    display: none;\n}\n\n.places_map_sections_thumbnail_overflow {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    left: 0;\n    top: 0;\n}",""]),t.default=o},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return g}));n(2);var i=new function(){var e=this,t=[],n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},o="",a=!1,l=function(t,i,a,l,s){var r=function e(){c(),t.removeEventListener(n[o],e)},c=function(){t&&(t.style[o]=""),"function"==typeof s&&s()};this.cancel=function(){t.removeEventListener(n[o],r)},function(){if(this.element=t,e.checkTransitionSupport(),o){var c=[];for(var d in i)c.push(d+" "+a+"ms "+(l||"linear"));t.style[o]=c.join(", ")}for(var p in i)i.hasOwnProperty(p)&&(t.style[p]=i[p]);o?t.addEventListener(n[o],r):"function"==typeof s&&s()}()};this.checkTransitionSupport=function(){if(!a){for(var e in n)if(e in document.body.style){o=e;break}a=!0}},this.animate=function(e,n,i,o,a){for(var s=t.length;s--;)t[s].element===e&&(t[s].cancel(),t.splice(s,1));t.push(new l(e,n,i,o,a))},this.sendXhr=function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){t.readyState===XMLHttpRequest.DONE&&(200===t.status?e.onSuccess(t.responseText):e.onFailure&&e.onFailure())},t.open("GET",e.url,!0),t.send(null)},this.createSvgNode=function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg",e);for(var i in t=t||{})t.hasOwnProperty(i)&&n.setAttributeNS(null,i,t[i]);return n},this.getSvgTextBBox=function(e,t){var n=i.createSvgNode("svg"),o=i.createSvgNode("text",t),a=document.createTextNode(e);o.appendChild(a),n.appendChild(o),document.body.appendChild(n);var l=o.getBBox();return document.body.removeChild(n),l},this.addClass=function(e,t){if(e){var n=e.getAttribute("class")||"";-1===n.indexOf(t)&&(""===n?e.setAttribute("class",t):e.setAttribute("class",n+" "+t))}},this.removeClass=function(e,t){if(e){var n=e.getAttribute("class")+"";-1!==n.indexOf(t)&&(-1!==n.indexOf(t+" ")?t+=" ":-1!==n.indexOf(" "+t)&&(t=" "+t),n=n.replace(t,""),e.setAttribute("class",n))}},this.isTransformSupported=function(){return"transform"in document.body.style},this.getPosition=function(e){var t=0,n=0;if(e.offsetParent)do{t+=e.offsetLeft,n+=e.offsetTop}while(e=e.offsetParent);return{x:t,y:n}},this.createStretchHackElement=function(e){var t=document.createElement("img");return t.src="data:image/svg+xml,%3Csvg viewBox='"+e+"' xmlns='http://www.w3.org/2000/svg'/%3E",t.style.width="100%",t.style.maxWidth="100%",t.style.maxHeight="100%",t.style.verticalAlign="top",t}},o=function(e){this.createCanvas=function(o){for(var a,l=JSON.parse(JSON.stringify(o.data)),s=o.relevantSections||[],r=i.createSvgNode("svg",{viewBox:"0 0 "+l.width+" "+l.height,width:"100%",height:"100%"}),c={},d={},p=function(){this.firstSeat=null,this.lastSeat=null},u=[],f={},h=s.length;h--;)f[s[h]]=!0;for(var m=0;m<l.seats.length;++m){var v=l.seats[m],g=v.section;if(f[g]){c[g]||(c[g]=[]);var _=g+"_"+v.row;d[_]||(d[_]=new p);var y=d[_];(!y.firstSeat||+y.firstSeat.place>+v.place)&&(y.firstSeat=v),(!y.lastSeat||+y.lastSeat.place<+v.place)&&(y.lastSeat=v),c[g].push(v),u.push(v)}}var b=t(u),x=0,C=0;if(b.width/b.height>2.25)C=(b.width/2.25-b.height)/2;else if(b.width/b.height<.75){x=(.75*b.height-b.width)/2}var S=4.5*Constants.SEAT_CIRCLE_RADIUS;if((S>x||S>C)&&(x+=S,C+=S),b.x-=x,b.y-=C,b.width+=2*x,b.height+=2*C,o.withStage&&l.stageType){var E=i.getSvgTextBBox(e.getTranslation("stage-"+l.stageType),{"font-size":Constants.STAGE_TEXT_SIZE,"font-weight":"bold"}),w=l.stageX-E.width/2,T=l.stageY-E.height/2;w<b.x&&(b.width+=b.x-w,b.x=w),T<b.y&&(b.height+=b.y-T,b.y=T),b.width<w+E.width&&(b.width=w+E.width),b.height<T+E.height&&(b.height=T+E.height)}r.setAttribute("viewBox","0 0 "+b.width+" "+b.height),l.stageX-=b.x,l.stageY-=b.y;for(var N=u.length;N--;){var k=u[N];k.x-=b.x,k.y-=b.y}if(o.withStage&&l.stageType){a=i.createSvgNode("text",{id:"stagename","text-anchor":"middle",x:l.stageX,y:l.stageY,fill:"#999999","font-size":Constants.STAGE_TEXT_SIZE,"font-weight":"bold",dy:"0.3em"});var L=document.createTextNode(l.stageType);a.appendChild(L),r.appendChild(a)}for(var M in d){var D=d[M];D.firstSeat&&D.lastSeat&&(r.appendChild(n(D.firstSeat,D.lastSeat)),r.appendChild(n(D.lastSeat,D.firstSeat)))}for(var I=0;I<u.length;++I){var A=u[I],z=i.createSvgNode("g",{class:"place",id:"place_"+A.code,cx:A.x,cy:A.y});r.appendChild(z);var P=i.createSvgNode("circle",{cx:A.x,cy:A.y,r:Constants.SEAT_CIRCLE_RADIUS});if(z.appendChild(P),A.place){var O={class:"place_detail seat_text",x:A.x,y:A.y,dy:"0.35em","stroke-width":0,"text-anchor":"middle","font-size":6.9};e.isPlacesMapFlipped()&&(O.transform="rotate(180 "+A.x+" "+A.y+")"),P=i.createSvgNode("text",O);var R=document.createTextNode(A.place);P.appendChild(R),z.appendChild(P)}}var j={},B={};for(var Z in c){var F=t(c[Z]);if(Constants.DEBUG_FULL_PLACESMAP_SECTIONS){var H=i.createSvgNode("rect",{x:F.x,y:F.y,width:F.width,height:F.height,fill:"#7f52ff","data-section":Z});r.appendChild(H)}var U=i.createSvgNode("text",{class:"section_label",x:F.x+F.width/2,y:F.y+F.height/2,dy:"-0.35em","text-anchor":"middle","font-size":14,fill:"#000000"});B[Z]=U,r.appendChild(U),j[Z]=F}e.displayMapInPlaces=1===l.displayMapInPlaces;var X=new PlacesMapCanvas(e,r,B);return X.setSectionsBoundaries(j),X};var t=function(e){for(var t={x:-1,y:-1},n={x:-1,y:-1},i=0;i<e.length;++i){var o=e[i],a=+o.x,l=+o.y;(t.x<0||a<t.x)&&(t.x=a),(t.y<0||l<t.y)&&(t.y=l),(n.x<0||a>n.x)&&(n.x=a),(n.y<0||l>n.y)&&(n.y=l)}var s=Constants.SEAT_CIRCLE_RADIUS;return{x:t.x-s,y:t.y-s,width:n.x-t.x+2*s,height:n.y-t.y+2*s}},n=function(t,n){var o=t.x<=n.x,a=t.x;o?a-=2*Constants.SEAT_CIRCLE_RADIUS:a+=2*Constants.SEAT_CIRCLE_RADIUS;var l=function(e,t,n,i){return 180*Math.atan2(i-t,n-e)/Math.PI},s="rotate("+Math.round(o?l(t.x,t.y,n.x,n.y):l(n.x,n.y,t.x,t.y))+","+t.x+","+t.y+")",r=e.isPlacesMapFlipped();r&&(s+=", rotate(180 "+a+" "+t.y+")");var c=o&&!r||!o&&r?"end":"start",d=i.createSvgNode("text",{class:"place_detail",x:a,y:t.y,dy:"0.35em",transform:s,"stroke-width":0,"text-anchor":c,"font-size":10,fill:"#999999"}),p=document.createTextNode(t.row);return d.appendChild(p),d}},a=function(e){var t,n,i,o,a,l,s,r,c,d,p,u=this;this.clear=function(){for(;a.firstChild;)a.removeChild(a.firstChild);for(;s.firstChild;)s.removeChild(s.firstChild);for(;r.firstChild;)r.removeChild(r.firstChild);for(;c.firstChild;)c.removeChild(c.firstChild);for(;i.firstChild;)i.removeChild(i.firstChild);o.style.display="none",l.style.display="none",d.style.display="none",p.style.display="none",n.style.display="none"},this.display=function(f,h,m,v){t||function(){(t=document.createElement("div")).className="place_tooltip",t.style.display="none",document.body.appendChild(t);var u=document.createElement("div");u.className="place_tooltip_content",t.appendChild(u);var f=document.createElement("table");u.appendChild(f);var h,m=document.createElement("tbody");f.appendChild(m),n=document.createElement("tr"),m.appendChild(n),(h=document.createElement("td")).className="place_tooltip_label",h.appendChild(document.createTextNode(e.getTranslation("section"))),n.appendChild(h),(i=document.createElement("td")).className="place_tooltip_value",n.appendChild(i),o=document.createElement("tr"),m.appendChild(o),(h=document.createElement("td")).className="place_tooltip_label",h.appendChild(document.createTextNode(e.getTranslation("row"))),o.appendChild(h),(a=document.createElement("td")).className="place_tooltip_value",o.appendChild(a),l=document.createElement("tr"),m.appendChild(l),(h=document.createElement("td")).className="place_tooltip_label",h.appendChild(document.createTextNode(e.getTranslation("place"))),l.appendChild(h),(s=document.createElement("td")).className="place_tooltip_value",l.appendChild(s),d=document.createElement("tr"),m.appendChild(d),(h=document.createElement("td")).className="place_tooltip_label",h.appendChild(document.createTextNode(e.getTranslation("price"))),d.appendChild(h),(r=document.createElement("td")).className="place_tooltip_value",d.appendChild(r),p=document.createElement("tr"),m.appendChild(p),(c=document.createElement("td")).setAttribute("colspan","2"),c.className="place_tooltip_status",p.appendChild(c)}(),u.clear();var g,_={0:"booked",1:"available",2:"selected",3:"not_sold"},y=_[h]||_[0],b="";if("full_venue"===e.getSectionsMapType()){var x=e.getSectionBySeatId(f.id);b=x?x.title:""}if(b&&(i.appendChild(document.createTextNode(b)),n.style.display=""),"not_sold"!==y&&(f.row&&(a.appendChild(document.createTextNode(f.row)),o.style.display=""),f.place&&(s.appendChild(document.createTextNode(f.place)),l.style.display="")),e.isSeatSelectionEnabled()){var C=e.getTranslation(y);c.appendChild(document.createTextNode(C)),p.style.display=""}f.price&&"booked"!==y&&"not_sold"!==y&&(r.appendChild(document.createTextNode(f.price)),d.style.display=""),g=window.innerHeight?window.innerWidth:document.documentElement.offsetWidth,t.style.left="0px",t.style.top="0px",t.style.visibility="hidden",t.style.display="block";var S=t.offsetWidth,E=t.offsetHeight,w=m+0,T=v-E-0;(w-=S/2)+S+0>=g&&(w=m-0-S),T-0<0&&(T=v+0+E),t.style.left=w+"px",t.style.top=T+"px",t.style.visibility="visible"},this.hide=function(){t&&(t.style.display="none")},this.dispose=function(){window.removeEventListener("resize",u.resize),t&&t.parentNode&&t.parentNode.removeChild(t),t=null}},l=function(e,t,n,i){var o=this,a=!1,l=!1;this.id=!1;this.refreshStatus=function(){a?this.markInactive():this.markDisabled()},this.mouseOver=function(){o.markActive(),e.trigger("sectionMouseover",n)},this.mouseOut=function(){o.markInactive(),e.trigger("sectionMouseout",n)},this.markDisabled=function(){i&&i.setAttribute("style","display: none;")},this.markActive=function(){i&&!l&&(i.setAttribute("fill","#75bb01"),i.setAttribute("opacity","0.8"),i.setAttribute("style","display: block;"))},this.markInactive=function(){i&&!l&&(i.setAttribute("fill","#cccccc"),i.setAttribute("opacity","0"),i.setAttribute("style","display: block;"))},this.markActivePermanently=function(){o.markActive(),l=!0},this.markInactivePermanently=function(){o.markInactive(),l=!0},this.unLockActive=function(){l=!1,o.markInactive()},this.setEnabled=function(e){a=!!e},this.click=function(){e.trigger("sectionSelected",n)},o.id=n,i.addEventListener("click",o.click),i.addEventListener("mouseover",o.mouseOver),i.addEventListener("mouseout",o.mouseOut)},s=function(e){var t,n,o={};this.imageElement=!1,this.mapElement=!1,this.vectorDocument=!1;var a=this;this.update=function(){for(var t={},n=e.getEnabledSections(),i=n.length;i--;)t[n[i]]=!0;for(var a in o)o[a].setEnabled(a in t),o[a].refreshStatus()},this.display=function(){t.style.display=""},this.hide=function(){t.style.display="none"},this.createImageElement=function(e){a.imageElement&&t.removeChild(a.imageElement);var n=document.createElement("img");n.setAttribute("src",e),a.imageElement=n,t.appendChild(n)},this.checkMapElement=function(){n&&t.removeChild(n),a.mapElement&&(n=i.createStretchHackElement(a.mapElement.getAttribute("viewBox")),t.appendChild(n),t.appendChild(a.mapElement),a.vectorDocument=a.mapElement,s(),a.update())};var s=function(){if(a.mapElement&&a.vectorDocument){for(var t=a.vectorDocument,n=0;n<t.childNodes.length;n++)if(t.childNodes[n].id){var i=t.childNodes[n].id.split("section")[1],s=t.childNodes[n];o[i]||(o[i]=new l(e,a,i,s))}a.mapElement.style.visibility="visible"}};this.getComponentElement=function(){return t},this.getMapRegions=function(){return o},(t=document.createElement("div")).className="piletilevi_venue_map_sections"},r=function(e){var t,n=this,o={},a={extend:function(t){t.preventDefault(),t.stopPropagation(),e.extend()},zoomin:function(t){t.preventDefault(),t.stopPropagation(),e.zoomIn()},zoomout:function(t){t.preventDefault(),t.stopPropagation(),e.zoomOut()},resetzoom:function(t){t.preventDefault(),t.stopPropagation(),e.setZoomLevel(0)}},l=function(){(t=document.createElement("div")).className="piletilevi_venue_map_controls",e.getExtensionHandler()&&s("extend"),s("zoomin"),s("zoomout"),s("resetzoom"),n.changeStates({extend:!0})},s=function(e){var n=document.createElement("div");return n.className="piletilevi_venue_map_control piletilevi_venue_map_control_"+e,t.appendChild(n),o[e]=n,n};this.changeStates=function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=o[t];if(!n)continue;e[t]?(i.addClass(n,"piletilevi_venue_map_control_active"),n.addEventListener("click",a[t],!0)):(i.removeClass(n,"piletilevi_venue_map_control_active"),n.removeEventListener("click",a[t],!0))}},this.setVisible=function(e){t.style.display=e?"block":"none"},this.getComponentElement=function(){return t},l()},c=function(e){var t,n,i,o;this.setOtherPoint=function(n){t=n,i={top:Math.min(e.top,t.top),left:Math.min(e.left,t.left),width:Math.abs(e.left-t.left),height:Math.abs(e.top-t.top)},a()};var a=function(){for(var e in i)i.hasOwnProperty(e)&&(n[e]=i[e]+"px")};this.getRegion=function(){return i},this.getComponentElement=function(){return o},(o=document.createElement("div")).className="piletilevi_venuemap_selection_rectangle",(n=o.style).position="absolute",n.borderWidth="1px",i={top:e.top,left:e.left,width:0,height:0},a()},d=function(e,t,n,i){var o;this.colorElement=!1,this.titleElement=!1,this.suffixElement=!1,this.text=!1,this.color=!1,this.init=function(){this.text=e,this.color=t,(o=document.createElement("span")).className="places_map_legend_item",n&&(o.className+=" places_map_legend_item_"+n),this.colorElement=document.createElement("span"),this.colorElement.className="places_map_legend_color",o.appendChild(this.colorElement),this.titleElement=document.createElement("span"),this.titleElement.className="places_map_legend_title",o.appendChild(this.titleElement),i&&(this.suffixElement=document.createElement("span"),this.suffixElement.className="places_map_legend_suffix",o.appendChild(this.suffixElement)),this.refreshContents()},this.refreshContents=function(){var e=this.text;this.setTextContent(this.titleElement,e),i&&this.setTextContent(this.suffixElement,i),this.colorElement.style.backgroundColor=this.color},this.setTextContent=function(e,t){for(;e.firstChild;)e.removeChild(e.firstChild);var n=document.createTextNode(t);e.appendChild(n)},this.getComponentElement=function(){return o},this.init()},p=function(e){var t,n,o,a,l,s,p,u,f=this,h=!1,m={},v=0,g={},_=function(){(o=document.createElement("div")).className="piletilevi_venue_map_places",o.style.display="none",(n=document.createElement("div")).className="places_map_legend",o.appendChild(n),(t=document.createElement("div")).className="places_map_sections_thumbnail",o.appendChild(t);var l=document.createElement("div");l.className="places_map_sections_thumbnail_overflow",t.appendChild(l),(a=document.createElement("div")).className="piletilevi_venue_map_places_main",a.style.position="relative",a.style.overflow="hidden",(u=document.createElement("div")).style.position="absolute",u.style.left="0",u.style.right="0",u.style.top="0",u.style.bottom="0",u.style.display="none",a.appendChild(u),o.appendChild(a),e.getWithControls()&&(s=new r(e),a.appendChild(s.getComponentElement()),i.addClass(o,"piletilevi_venue_map_places_with_controls"))};this.getSectionsThumbnailElement=function(){return t};var y=function e(t){17===t.code&&l&&(v=1,s&&s.setVisible(!1),l.disableDragging(),a.style.cursor="crosshair",u.style.display="block",a.addEventListener("mousedown",x),document.removeEventListener("keydown",e),document.addEventListener("keyup",b))},b=function(e){17===e.code&&w()},x=function e(t){a.removeEventListener("mousedown",e),E(N(t))},C=function(e){p.setOtherPoint(N(e));var t=p.getRegion();l.selectSeatsInRegion(t,g)},S=function(){w()},E=function(e){v=2;var t=l.getSelectedSeats();g={};for(var n=t.length;n--;){var i=t[n].getSeatInfo();i&&(g[i.id]=!0)}p=new c(e),a.appendChild(p.getComponentElement()),a.addEventListener("mousemove",C),a.addEventListener("mouseup",S)},w=function(){if(e.getZoomLevel()>0&&l.enableDragging(),document.removeEventListener("keyup",b),a.removeEventListener("mousedown",x),a.removeEventListener("mouseup",S),a.removeEventListener("mousemove",C),p&&(a.removeChild(p.getComponentElement()),p=null),2===v){for(var t=[],n=l.getSelectedSeats(),i=n.length;i--;){var o=n[i].getSeatInfo();o&&!g[o.id]&&t.push(o.id)}t.length>0&&e.trigger("seatsSelected",t)}v=0,document.addEventListener("keydown",y),window.setTimeout(T,100)},T=function(){0===v&&(a.style.cursor="",u.style.display="none",s&&s.setVisible(!0))},N=function(e){var t=i.getPosition(a);return{top:Math.max(0,e.pageY-t.y),left:Math.max(0,e.pageX-t.x)}},k=function(t){if(t.preventDefault&&t.preventDefault(),t.returnValue=!1,0===v&&0!==t.deltaY){var n=t,i=a.getBoundingClientRect(),o=n.pageX-i.left-window.pageXOffset,s=n.pageY-i.top-window.pageYOffset,r=l.getPointRelativeToContainer(o,s),c=t.deltaY<0,d=e.getZoomLevel();c?++d:--d;var p=l?l.getMaxZoomLevel():0;d>=0&&d<=p&&e.setZoomLevel(d,!0,r)}};this.adjustZoomControls=function(){if(s){var t=l?l.getMaxZoomLevel():0,n=e.getZoomLevel(),i={zoomin:n<t,zoomout:n>0,resetzoom:n>0};s.changeStates(i)}},this.changeCanvas=function(e){for(var t in l&&l.remove(),(l=e).attachTo(f),m)l.updateSectionDetails(m[t]);[],l.setDisplayed(h)},this.updateSectionsDetails=function(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){m[n]=e[n],L(e[n]);var i=e[n].priceClasses||[];t=t.concat(i)}for(var o={},a=0;a<t.length;){var l=t[a];o[l.id]?t.splice(a,1):(o[l.id]=!0,++a)}M(t)},this.updateSectionDetails=function(t){if(e.displayMapInPlaces&&o.classList.add("piletilevi_venue_map_places_with_map"),t){m[t.id]=t;var n=t.priceClasses||[];M(n),L(t)}},this.adjustToZoom=function(e,t){l&&l.adjustToZoom(e,t)},this.resize=function(){h&&l&&l&&l.resize()},this.getLegendHeight=function(){var e=window.getComputedStyle(n),t=parseFloat(e.marginTop)+parseFloat(e.marginBottom);return n.offsetHeight+t},this.setDisplayed=function(e){h!==e&&(h=e,l&&l.setDisplayed(!0),o.style.display=h?"":"none")},this.getComponentElement=function(){return o},this.selectSection=function(e){l&&l.selectSection(e)};var L=function(e){l&&l.updateSectionDetails(e)},M=function(t){for(var i;n.firstChild;)n.removeChild(n.firstChild);var o=e.getLegendType(),a="price"===o||"title"===o;if(n.style.display=a?"block":"none",a){var l=e.getTranslation("booked");i=new d(l,e.getSeatColor("inactive"),"booked"),n.appendChild(i.getComponentElement());var s="price"===o?function(e,t){return parseFloat(e.price)-parseFloat(t.price)}:function(e,t){return e.title.localeCompare(t.title)};t.sort(s);for(var r=0;r<t.length;r++)t[r][o]&&(i=new d(t[r][o],t[r].color,"",e.getCurrency()),n.appendChild(i.getComponentElement()))}};this.getMainElement=function(){return a},_(),a.addEventListener("wheel",k),e.isMassSelectable()&&document.addEventListener("keydown",y)},u="shop.piletilevi.ee",f="#27272e",h="#27272e",m="#d0d0d0";function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(){}g.venuemap={},g.venuemap.VenueMap=function(){var e,t,n,l,r,c,d,g,_,y=this,b=u,x=!1,C="",S=!1,E=!1,w=!1,T="vector",N="",k="",L=[],M=[],D=[],I={},A={},z={},P=0,O=[],R=!1,j=!0,B=!1,Z=0,F=!1,H=0,U=!1,X=!1,W={},Y={},q=!1,J=!1,V=!1,G="price",K="",Q=!1,$={},ee=16,te={},ne=!1,ie=0;this.displayMapInPlaces=!1;var oe={hover:f,active:h,inactive:m},ae=function(e,n){de(),(l||"full_venue"===T)&&t.adjustToZoom(e,n)};this.build=function(){"full_venue"!==T&&(e=new s(y),r.appendChild(e.getComponentElement())),t=new p(y),r.appendChild(t.getComponentElement()),c=new a(y),R=!0,K?le():y.update()};var le=function(){Q=!0,y.requestShopData("/public/seatingPlanOverrides",(function(e){$=null;try{$=JSON.parse(e)}catch(e){return void console.error("Failed parsing config overrides response")}"object"==v($)?(Q=!1,y.update()):console.error("Received invalid config overrides response")}),(function(){console.error("Failed loading config overrides")}))},se=function(e,t){H!==C?(H=C,y.requestShopData("/public/upload/seatingplan_json/"+C+".json",(function(t){re(t),U=!0,y.trigger("placesMapLoadSuccess"),e()}),(function(){t(),U=!1,y.trigger("placesMapLoadFailure")}),!1)):U?e():t()},re=function(e){_=JSON.parse(e),te={};for(var t=0;t<_.seats.length;++t){var n=_.seats[t];te[n.section]=!0}},ce=function(t){var n=t,i=new DOMParser;try{var o=i.parseFromString(n,"image/svg+xml");if(o&&o.getElementsByTagName("parsererror").length>0&&(o=null),o){for(var a=o.getElementsByTagName("image"),l=(x?"https":"http")+"://"+b,s=a.length;s--;)a[s].setAttribute("xlink:href",l+a[s].getAttribute("xlink:href"));e.mapElement=document.adoptNode(o.documentElement),e.mapElement.style.verticalAlign="top",e.checkMapElement()}}catch(e){}},de=function(){t.adjustZoomControls()};this.update=function(){var i,o,a,s;if(!Q)if(R)if(K&&$[K]&&(C=$[K]),"full_venue"!==T){var c=e.getMapRegions();if(l){if(y.displayMapInPlaces){if(e.display(),a=t.getSectionsThumbnailElement(),s=e.getComponentElement(),a.insertBefore(s,a.firstChild),void 0!==c[l])for(var d in c[l].markActivePermanently(),c)d!==l&&c[d].markInactivePermanently()}else e.hide();t.setDisplayed(!0);var p=y.getSectionDetails(l);if(t.updateSectionDetails(p),l===n)return;n=l,y.hide(),y.setCurrentZoomLevel(0),se((function(){if(te[l]){t.setDisplayed(!0),y.display();var e=g.createCanvas({data:_,relevantSections:[l]});t.changeCanvas(e)}else y.hide()}),(function(){y.hide()}))}else{if(y.displayMapInPlaces)for(var u in function(){var t=e.getComponentElement();r.appendChild(t)}(),c)c[u].unLockActive(),c[u].refreshStatus();y.setCurrentZoomLevel(0),n=0,t.setDisplayed(!1),e.update(),e.display(),i=function(){y.display()},o=function(){y.hide()},Z!==C?(Z=C,"image"===T?(e.createImageElement(k),i()):y.requestShopData("/public/upload/seatingplan_svg/"+C+".svg",(function(e){i(),F=!0,ce(e)}),(function(){o(),F=!1,y.trigger("sectionsMapLoadFailure")}))):F?i():o()}}else{if(t.updateSectionsDetails(z),ne)return;se((function(){t.setDisplayed(!0),y.display();var e=g.createCanvas({data:_,relevantSections:M,withStage:!0});t.changeCanvas(e),ne=!0}),(function(){y.hide()}))}else y.build()},this.display=function(){j||(r.style.display="",j=!0,y.resize(),y.trigger("visibilityChange",j))},this.hide=function(){j&&(r.style.display="none",j=!1,y.trigger("visibilityChange",j))},this.setConfId=function(e){C=e},this.setConcertId=function(e){K=e},this.getConfId=function(){return C},this.getZoomLimit=function(){return ee},this.setZoomLimit=function(e){ee=e},this.getSectionsMap=function(){return e},this.setSectionsMapType=function(e){T=e},this.getSectionsMapType=function(){return T},this.setSectionsMapImageUrl=function(e){k=e},this.getSectionsMapImageUrl=function(){return k},this.setSections=function(e){L=e},this.getSections=function(){return L},this.setEnabledSections=function(e){M=e},this.getEnabledSections=function(){return M},this.setSeatSelectionEnabled=function(e){S=e},this.setSeatDraggingEnabled=function(e){w=e},this.isSeatDraggingEnabled=function(){return w},this.isSeatSelectionEnabled=function(){return S},this.enableSeatsStatusDisplaying=function(e){E=e},this.isSeatsStatusDisplayed=function(){return E},this.addSectionDetails=function(e){z[e.id]=e;for(var t=e.seatsInfo.length;t--;){var n=e.seatsInfo[t];W[n.id]=e}},this.getSectionDetails=function(e){return z[e]||null},this.setSelectedSeats=function(e){for(var t=(D=e).length;t--;)I[D[t]]=!0},this.unSetSelectedSeats=function(e){for(var t=e.length;t--;)I[e[t]]=!1},this.unSelectSeat=function(e){I[e]=!1},this.setSeatColors=function(e){oe.hover=e.hover||f,oe.active=e.active||h,oe.inactive=e.inactive||m},this.getSeatColor=function(e){return oe[e]},this.isSeatSelected=function(e){return I[e]||!1},this.getSectionBySeatId=function(e){return W[e]||null},this.addHandler=function(e,t){void 0===A[e]&&(A[e]=[]),A[e].push(t)},this.trigger=function(e,t){for(var n in A)if(n===e){for(var i=A[n].length;i--;){(0,A[n][i])(t)}break}},this.setSelectedSection=function(e){l=e,t&&"full_venue"===T&&t.selectSection(e)},this.setShopDomain=function(e){b=e},this.setConnectionSecure=function(e){x=e},this.isConnectionSecure=function(){return x},this.getShopDomain=function(){return b},this.getSelectedSection=function(){return l},this.getComponentElement=function(){return r},this.zoomIn=function(){++P,ae()},this.zoomOut=function(){--P>=0||(P=0),ae()},this.setZoomLevel=function(e,t,n){P=e,ae(t,n)},this.setCurrentZoomLevel=function(e){P=e,de()},this.resize=function(){var e=r.cloneNode(!1);e.style.visibility="hidden",e.style.display="block",r.parentNode.appendChild(e),ie=e.offsetHeight,r.parentNode.removeChild(e),t&&t.resize()},this.getFixedHeight=function(){return ie},this.getZoomLevel=function(){return P},this.addTranslation=function(e,t){O[e]=t},this.getTranslation=function(e){return O[e]?O[e]:e},this.getPlaceToolTip=function(){return c},this.requestShopData=function(e,t,n,o){if(void 0===Y[e]){var a=x?"https":"http",l=b;e.indexOf("seatingPlanOverrides")>=0&&(l=u),l===u&&(a="https");var s=a+"://"+l+e;if(o)s+="?"+(new Date).getTime();i.sendXhr({url:s,onSuccess:function(n){Y[e]=n,t(n)},onFailure:function(){Y[e]=!1,n()}})}else!1===Y[e]?n():t(Y[e])},this.areInactiveSeatsNumbered=function(){return B},this.setInactiveSeatsNumbered=function(e){B=!!e},this.getWithControls=function(){return X},this.setWithControls=function(e){X=!!e},this.getExtensionHandler=function(){return d},this.setExtensionHandler=function(e){d=e},this.getLegendType=function(){return G},this.setLegendType=function(e){G=e},this.isMassSelectable=function(){return J},this.setMassSelectable=function(e){J=!!e},this.isPlacesMapFlipped=function(){return V},this.setPlacesMapFlipped=function(e){V=e&&i.isTransformSupported()},this.setCurrency=function(e){N=e},this.getCurrency=function(){return N},this.extend=function(){if(d){q=!q,d();q?i.addClass(r,"piletilevi_venue_map_extended"):i.removeClass(r,"piletilevi_venue_map_extended")}},this.dispose=function(){r&&r.parentNode&&r.parentNode.removeChild(r),r=null,c&&c.dispose()},(r=document.createElement("div")).className="piletilevi_venue_map",r.style.display="none",r.style["-moz-user-select"]="none",r.style["-ms-user-select"]="none",r.style["-webkit-user-select"]="none",r.style.userSelect="none",g=new o(y),y.hide(),window.addEventListener("resize",y.resize)}}]);